<Page x:Class="Coach_search.MVVM.View.EnrollPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:sys="clr-namespace:System;assembly=System.Runtime"
      Title="Запись к репетитору"
      Background="{DynamicResource MahApps.Brushes.ThemeBackground}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок и кнопка "Назад" -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <Button Style="{StaticResource MahApps.Styles.Button.Flat}"
                    Command="{Binding GoBackCommand}"
                    ToolTip="Назад">
                <materialDesign:PackIcon Kind="ArrowLeft" Width="24" Height="24" Foreground="#666"/>
            </Button>
            <TextBlock Text="Запись к репетитору" 
                       FontSize="24" 
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       Margin="10,0"
                       Foreground="#333"/>
        </StackPanel>

        <!-- Форма записи -->
        <Border Grid.Row="1" CornerRadius="8" 
                Background="{DynamicResource MahApps.Brushes.Control.Background}"
                Padding="20">
            <StackPanel>
                <TextBlock Text="{Binding TutorName}" 
                           FontSize="18" 
                           FontWeight="Bold"
                           Margin="0,0,0,15"
                           Foreground="#333"/>

                <TextBlock Text="Выберите дату и время" 
                           FontSize="14" 
                           Margin="0,0,0,5"
                           Style="{DynamicResource MahApps.Styles.TextBlock}"/>

                <DatePicker SelectedDate="{Binding SelectedDate, UpdateSourceTrigger=PropertyChanged}"
                            DisplayDateStart="{x:Static sys:DateTime.Today}"
                            mah:TextBoxHelper.Watermark="Выберите дату"
                            Margin="0,0,0,10"
                            Style="{DynamicResource MahApps.Styles.DatePicker}"/>

                <ComboBox ItemsSource="{Binding AvailableTimes}"
                          SelectedItem="{Binding SelectedTime}"
                          mah:TextBoxHelper.Watermark="Выберите время"
                          Margin="0,0,0,20"
                          Style="{DynamicResource MahApps.Styles.ComboBox}"/>

                <Button Content="Подтвердить запись"
                        Command="{Binding ConfirmBookingCommand}"
                        Style="{DynamicResource MahApps.Styles.Button}"
                        Background="#42A5F5"
                        BorderBrush="#42A5F5"
                        Padding="15,5"
                        mah:ControlsHelper.CornerRadius="5"
                        Width="200"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>